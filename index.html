<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Note Generator</title>

<style>
  body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#f5f5f5;
    color:#111;
  }

  .container{
    max-width: 900px;
    margin:auto;
    padding:20px;
  }

  h2{ margin-bottom:16px; }

  .card{
    background:#fff;
    border:1px solid #ddd;
    border-radius:12px;
    padding:16px;
    margin-bottom:16px;
  }

  label{
    font-weight:bold;
    display:block;
    margin-top:12px;
  }

  textarea, input[type="text"], select{
    width:100%;
    padding:10px;
    margin-top:6px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:14px;
  }

  textarea{ min-height:80px; }

  .hidden{ display:none; }

  .output{
    white-space:pre-wrap;
    background:#fff;
    border:1px solid #ccc;
    border-radius:10px;
    padding:14px;
    min-height:220px;
  }

  .actions{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    margin-top:12px;
  }

  button{
    padding:10px 14px;
    border-radius:10px;
    border:0;
    background:#111;
    color:#fff;
    cursor:pointer;
  }

  button.secondary{
    background:#e9e9e9;
    color:#111;
    border:1px solid #ccc;
  }

  .refImg{
    width:100%;
    border-radius:10px;
    border:1px solid #ddd;
    margin-top:10px;
  }
</style>
</head>

<body>
<div class="container">

<h2>Note Generator</h2>

<!-- FORM -->
<div class="card">

<label>What was the issue reported:</label>
<textarea id="issue"></textarea>

<label>What was found with unit:</label>
<textarea id="found"></textarea>

<label>Was it a repair or an exchange:</label>
<select id="repairExchange">
  <option value="">Select</option>
  <option value="Repair">Repair</option>
  <option value="Exchange">Exchange</option>
</select>

<div id="exchangeWhyWrap" class="hidden">
  <label>If exchange, why was it exchanged?</label>
  <textarea id="exchangeWhy"></textarea>
</div>

<label>Advise customer:</label>
<textarea id="advise"></textarea>

<label>Warranty end date:</label>
<input type="text" id="warranty">

<label>Loaner code:</label>
<select id="loaner">
  <option value="">Select</option>
  <option>nwad-sameday</option>
  <option>nwad-dsc</option>
  <option>nwad-expense</option>
  <option>nwad-incon</option>
  <option>nwad-interest</option>
  <option>nwad-oos</option>
  <option>nwad-other</option>
</select>

<label>Return tracking number:</label>
<select id="trackingMode">
  <option value="">Select</option>
  <option value="N/A Walk-In">N/A Walk-In</option>
  <option value="Enter Tracking">Enter Tracking</option>
</select>

<div id="trackingWrap" class="hidden">
  <label>Tracking number:</label>
  <input type="text" id="tracking">
</div>

<div class="actions">
  <button id="copyBtn">Copy Notes</button>
  <button id="clearBtn" class="secondary">Clear</button>
</div>

</div>

<!-- GENERATED NOTES -->
<div class="card">
<h3>Generated Notes</h3>
<div class="output" id="output"></div>
</div>

<!-- NWAD IMAGE -->
<div class="card">
<h3>NWAD / Loaner Code Reference</h3>
<img class="refImg" src="nwad-codes.png">
</div>

</div>

<script>
const $ = id => document.getElementById(id);

const issue = $("issue");
const found = $("found");
const repairExchange = $("repairExchange");
const exchangeWhyWrap = $("exchangeWhyWrap");
const exchangeWhy = $("exchangeWhy");
const advise = $("advise");
const warranty = $("warranty");
const loaner = $("loaner");
const trackingMode = $("trackingMode");
const trackingWrap = $("trackingWrap");
const tracking = $("tracking");
const output = $("output");

// Conditional fields
function updateConditional(){
  exchangeWhyWrap.classList.toggle("hidden", repairExchange.value !== "Exchange");
  trackingWrap.classList.toggle("hidden", trackingMode.value !== "Enter Tracking");
}

// Build notes
function buildNotes(){
  const lines = [];
  lines.push(`| What was the issue reported: ${issue.value}`);
  lines.push(`| What was found with unit: ${found.value}`);
  lines.push(`| Was it a repair or an exchange: ${repairExchange.value}`);

  if (repairExchange.value === "Exchange"){
    lines.push(`| If exchange, why was it exchanged?: ${exchangeWhy.value}`);
  }

  lines.push(`| Advise customer: ${advise.value}`);
  lines.push(`| Warranty end date: ${warranty.value}`);
  lines.push(`| Loaner code: ${loaner.value}`);

  if (trackingMode.value === "N/A Walk-In"){
    lines.push(`| Return tracking number: N/A Walk-In`);
  } else if (trackingMode.value === "Enter Tracking"){
    lines.push(`| Return tracking number: ${tracking.value}`);
  }

  output.textContent = lines.join("\n");
}

// Live update
document.querySelectorAll("textarea,input,select").forEach(el=>{
  el.addEventListener("input", ()=>{updateConditional(); buildNotes();});
  el.addEventListener("change", ()=>{updateConditional(); buildNotes();});
});

// Copy
$("copyBtn").onclick = async () => {
  await navigator.clipboard.writeText(output.textContent);
  const toast = document.createElement("div");
  toast.textContent = "Copied!";
  toast.style.position="fixed";
  toast.style.bottom="20px";
  toast.style.right="20px";
  toast.style.background="#111";
  toast.style.color="#fff";
  toast.style.padding="10px 14px";
  toast.style.borderRadius="10px";
  document.body.appendChild(toast);
  setTimeout(()=>toast.remove(),1200);
};

// Clear
$("clearBtn").onclick = ()=>{
  document.querySelectorAll("textarea,input").forEach(e=>e.value="");
  document.querySelectorAll("select").forEach(e=>e.selectedIndex=0);
  updateConditional();
  buildNotes();
};

updateConditional();
</script>

</body>
</html>
