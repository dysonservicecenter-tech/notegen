<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Note Generator</title>

<style>
  :root{
    --bg:#f5f5f5;
    --panel:#ffffff;
    --border:#ddd;
    --text:#111;
    --muted:#666;
    --previewbg:#fafafa;
    --btn:#111;
    --btntext:#fff;
  }

  body{
    margin:0;
    font-family: Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
  }

  .container{
    display:flex;
    height:100vh;
  }

  .form{
    width:50%;
    overflow-y:auto;
    padding:20px;
    background: var(--panel);
  }

  .preview{
    width:50%;
    padding:20px;
    background: var(--previewbg);
    border-left:2px solid var(--border);
    overflow-y:auto;
  }

  h2,h3{ margin:0 0 14px 0; }

  .card{
    border:1px solid var(--border);
    border-radius:10px;
    padding:16px;
    margin-bottom:16px;
    background:#fff;
  }

  label{
    font-weight:bold;
    display:block;
    margin:12px 0 6px;
  }

  .hint{
    font-size: 12px;
    color: var(--muted);
    margin-top: -2px;
  }

  textarea, input[type="text"], select{
    width:100%;
    box-sizing:border-box;
    padding:10px;
    border:1px solid #cfcfcf;
    border-radius:8px;
    font-size:14px;
    background:#fff;
  }

  textarea{ min-height:84px; resize:vertical; }

  .row{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
  }
  .col{
    flex: 1 1 240px;
  }

  .output{
    white-space:pre-wrap;
    background:#fff;
    border:1px solid #ccc;
    border-radius:10px;
    padding:14px;
    min-height: 280px;
  }

  .actions{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    margin-top:12px;
  }

  button{
    padding:10px 14px;
    border-radius:10px;
    border:0;
    cursor:pointer;
    background: var(--btn);
    color: var(--btntext);
    font-size:14px;
  }

  button.secondary{
    background:#e9e9e9;
    color:#111;
    border:1px solid #cfcfcf;
  }

  .hidden{ display:none; }

  .refImg{
    width:100%;
    max-width: 900px;
    border-radius:10px;
    border:1px solid var(--border);
    display:block;
    margin-top:10px;
  }

  @media (max-width: 900px){
    .container{ flex-direction:column; height:auto; }
    .form,.preview{ width:100%; }
    .preview{ border-left:none; border-top:2px solid var(--border); }
  }
</style>
</head>

<body>
<div class="container">

  <!-- LEFT: FORM -->
  <div class="form">
    <h2>Note Generator</h2>

    <div class="card">
      <div class="row">
        <div class="col">
          <label for="issue">What was the issue reported:</label>
          <textarea id="issue" placeholder="Type here..."></textarea>
        </div>
        <div class="col">
          <label for="found">What was found with unit:</label>
          <textarea id="found" placeholder="Type here..."></textarea>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label for="repairExchange">Was it a repair or an exchange:</label>
          <select id="repairExchange">
            <option value="">Select</option>
            <option value="Repair">Repair</option>
            <option value="Exchange">Exchange</option>
          </select>
        </div>

        <div class="col hidden" id="exchangeWhyWrap">
          <label for="exchangeWhy">If exchange, why was it exchanged?</label>
          <textarea id="exchangeWhy" placeholder="Only required for Exchange..."></textarea>
        </div>
      </div>

      <label for="advise">Advise customer:</label>
      <textarea id="advise" placeholder="Type here..."></textarea>

      <div class="row">
        <div class="col">
          <label for="warranty">Warranty end date:</label>
          <input type="text" id="warranty" placeholder="MM/DD/YYYY (or whatever format you use)" />
        </div>

        <div class="col">
          <label for="loaner">Loaner code:</label>
          <select id="loaner">
            <option value="">Select</option>
            <option value="nwad-sameday">nwad-sameday</option>
            <option value="nwad-dsc">nwad-dsc</option>
            <option value="nwad-expense">nwad-expense</option>
            <option value="nwad-incon">nwad-incon</option>
            <option value="nwad-interest">nwad-interest</option>
            <option value="nwad-oos">nwad-oos</option>
            <option value="nwad-other">nwad-other</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label for="trackingMode">Return tracking number:</label>
          <select id="trackingMode">
            <option value="">Select</option>
            <option value="N/A Walk-In">N/A Walk-In</option>
            <option value="Enter Tracking">Enter Tracking</option>
          </select>
        </div>

        <div class="col hidden" id="trackingWrap">
          <label for="tracking">Tracking number:</label>
          <input type="text" id="tracking" placeholder="Paste tracking number..." />
        </div>
      </div>
    </div>

    <!-- STATIC REFERENCE IMAGE -->
    <div class="card">
      <label>NWAD / Loaner Code Reference</label>
      <div class="hint">This is a reference image you control (users do not upload anything).</div>

      <!-- IMPORTANT: Upload your image to the repo and name it exactly "nwad-codes.png"
           OR change the src below to match your uploaded filename. -->
      <img class="refImg" src="nwad-codes.png" alt="NWAD code reference image" />
    </div>

    <div class="actions">
      <button id="copyBtn" type="button">Copy Notes</button>
      <button id="clearBtn" class="secondary" type="button">Clear</button>
    </div>

    <div class="hint" style="margin-top:10px;">
      Tip: Preview updates live as you type. Click Copy Notes then paste into your system.
    </div>
  </div>

  <!-- RIGHT: LIVE PREVIEW -->
  <div class="preview">
    <h3>Generated Notes</h3>
    <div class="output" id="output"></div>
  </div>

</div>

<script>
  const $ = (id) => document.getElementById(id);

  const issue = $("issue");
  const found = $("found");
  const repairExchange = $("repairExchange");
  const exchangeWhyWrap = $("exchangeWhyWrap");
  const exchangeWhy = $("exchangeWhy");
  const advise = $("advise");
  const warranty = $("warranty");
  const loaner = $("loaner");
  const trackingMode = $("trackingMode");
  const trackingWrap = $("trackingWrap");
  const tracking = $("tracking");
  const output = $("output");
  const copyBtn = $("copyBtn");
  const clearBtn = $("clearBtn");

  function updateConditionalFields(){
    if (repairExchange.value === "Exchange") {
      exchangeWhyWrap.classList.remove("hidden");
    } else {
      exchangeWhyWrap.classList.add("hidden");
      exchangeWhy.value = "";
    }

    if (trackingMode.value === "Enter Tracking") {
      trackingWrap.classList.remove("hidden");
    } else {
      trackingWrap.classList.add("hidden");
      tracking.value = "";
    }
  }

  function buildNotes(){
    const lines = [];
    lines.push(`| What was the issue reported: ${issue.value.trim()}`);
    lines.push(`| What was found with unit: ${found.value.trim()}`);
    lines.push(`| Was it a repair or an exchange: ${repairExchange.value}`);

    if (repairExchange.value === "Exchange") {
      lines.push(`| If exchange, why was it exchanged?: ${exchangeWhy.value.trim()}`);
    }

    lines.push(`| Advise customer: ${advise.value.trim()}`);
    lines.push(`| Warranty end date: ${warranty.value.trim()}`);
    lines.push(`| Loaner code: ${loaner.value}`);

    if (trackingMode.value === "N/A Walk-In") {
      lines.push(`| Return tracking number: N/A Walk-In`);
    } else if (trackingMode.value === "Enter Tracking") {
      lines.push(`| Return tracking number: ${tracking.value.trim()}`);
    } else {
      lines.push(`| Return tracking number: `);
    }

    output.textContent = lines.join("\n").replace(/\s+$/gm, "");
  }

  function updateAll(){
    updateConditionalFields();
    buildNotes();
  }

  document.querySelectorAll("textarea, input[type='text'], select").forEach(el => {
    el.addEventListener("input", updateAll);
    el.addEventListener("change", updateAll);
  });

  copyBtn.addEventListener("click", async () => {
    const text = output.textContent || "";
    try {
      await navigator.clipboard.writeText(text);
      const toast = document.createElement("div");
      toast.textContent = "Copied!";
      toast.style.position = "fixed";
      toast.style.bottom = "20px";
      toast.style.right = "20px";
      toast.style.background = "#111";
      toast.style.color = "#fff";
      toast.style.padding = "10px 14px";
      toast.style.borderRadius = "10px";
      toast.style.zIndex = "9999";
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 1200);
    } catch (e) {
      alert("Copy failed. Try selecting the text in the preview and copying manually.");
    }
  });

  clearBtn.addEventListener("click", () => {
    issue.value = "";
    found.value = "";
    repairExchange.value = "";
    exchangeWhy.value = "";
    advise.value = "";
    warranty.value = "";
    loaner.value = "";
    trackingMode.value = "";
    tracking.value = "";
    updateAll();
  });

  updateAll();
</script>

</body>
</html>
